{"version":3,"file":"guide-mini-vue.cjs.js","sources":["../src/runtime-core/vNode.ts","../src/runtime-core/component.ts","../src/runtime-core/render.ts","../src/runtime-core/createApp.ts","../src/runtime-core/h.ts"],"sourcesContent":["export function createVNode(type, props?, children?) {\r\n\tconst vNode = {\r\n\t\ttype,\r\n\t\tprops,\r\n\t\tchildren,\r\n\t};\r\n\treturn vNode;\r\n}\r\n","export function createComponentInstance(vNode: any) {\r\n\tconst component = {\r\n\t\tvNode,\r\n\t\ttype: vNode.type,\r\n\t};\r\n\treturn component;\r\n}\r\n\r\nexport function setupComponent(instance) {\r\n\t// TODO\r\n\t// initProps\r\n\t// initSlots\r\n\tsetupStatefulComponent(instance);\r\n}\r\nfunction setupStatefulComponent(instance: any) {\r\n\tconst component = instance.type;\r\n\tconst { setup } = component;\r\n\tif (setup) {\r\n\t\tconst setupResult = setup();\r\n\t\thandleSetupResult(instance, setupResult);\r\n\t}\r\n}\r\n\r\nfunction handleSetupResult(instance: any, setupResult: any) {\r\n\tif (typeof setupResult === \"object\") {\r\n\t\tinstance.setupState = setupResult;\r\n\t}\r\n\t// TODO  type function\r\n\r\n\tfinishComponentSetup(instance);\r\n}\r\nfunction finishComponentSetup(instance: any) {\r\n\tconst component = instance.type;\r\n\tif (component.render) {\r\n\t\tinstance.render = component.render;\r\n\t}\r\n}\r\n","import { createComponentInstance, setupComponent } from \"./component\";\r\n\r\nexport function render(vNode, container) {\r\n\t// patch 方法，一直不懂得逻辑\r\n\tpatch(vNode, container);\r\n}\r\n\r\nfunction patch(vNode, container) {\r\n\t// 简要区分element / component\r\n\tif (typeof vNode.type === \"string\") {\r\n\t\tprocessElement(vNode, container);\r\n\t} else {\r\n\t\tprocessComponent(vNode, container);\r\n\t}\r\n}\r\nfunction processComponent(vNode: any, container: any) {\r\n\tmountComponent(vNode, container);\r\n}\r\nfunction mountComponent(vNode: any, container: any) {\r\n\tconst instance = createComponentInstance(vNode);\r\n\tsetupComponent(instance);\r\n\tsetupRenderEffect(instance, container);\r\n}\r\nfunction setupRenderEffect(instance: any, container) {\r\n\tconst subTree = instance.render();\r\n\tpatch(subTree, container);\r\n}\r\nfunction processElement(vNode: any, container: any) {\r\n\tmountElement(vNode, container);\r\n}\r\nfunction mountElement(vNode: any, container: any) {\r\n\tconst el = document.createElement(vNode.type);\r\n\tconst { props } = vNode;\r\n\tfor (const key in props) {\r\n\t\tconst val = props[key];\r\n\t\tel.setAttribute(key, val);\r\n\t}\r\n\tconst { children } = vNode;\r\n\t//  string or array\r\n\tif (typeof children === \"string\") {\r\n\t\tel.textContent = children;\r\n\t} else {\r\n\t\tchildren.forEach((child) => {\r\n\t\t\tpatch(child, el);\r\n\t\t});\r\n\t}\r\n\r\n\tcontainer.append(el);\r\n}\r\n","import { createVNode } from \"./vNode\";\r\nimport { render } from \"./render\";\r\n\r\nexport const createApp = function (rootComponent) {\r\n\treturn {\r\n\t\tmount(rootContainer) {\r\n\t\t\tconst vNode = createVNode(rootComponent);\r\n\t\t\trender(vNode, rootContainer);\r\n\t\t},\r\n\t};\r\n};\r\n","import { createVNode } from \"./vNode\";\r\n\r\nexport function h(type, props?, children?) {\r\n\treturn createVNode(type, props, children);\r\n}\r\n"],"names":[],"mappings":"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"}